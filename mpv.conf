log-file=~~/log

#For trouble shooting, run mpv with "--msg-level=all=v"

########    GUI    ########
###########################
no-border                  #minimal mode (similar to MPC-HC)
fit-border                 #fit whole window on screen
osc=no                     #disable on-screen controller (needed for scripts\mpv_thumbnail_script_client_osc.lua)
cursor-autohide=100        #hide cursor after 100ms no movement
###########################


########   Dithering   ########
###############################
dither-depth=8                 #target output bit-depth
dither=fruit                   #dithering algorithm
temporal-dither                #change dither pattern randomly
temporal-dither-period=1       #change dither pattern every n frames
###############################


###########   lookahead   ###########
#####################################
demuxer-mkv-subtitle-preroll=yes     #stops subtitles from disappearing when seeking backwards
demuxer-readahead-secs=24            #adds the ability to quickly skip forward with `sub-seek` to lines that have not been rendered yet
#####################################


#############   General   #############
#######################################
profile=gpu-hq                         #sets some stuff automagically that I won't have to write here
vo=gpu
hwdec=nvdec                            #hardware decoding --> nvidia dec
                                       #turn this off by commenting the entire line if your system doesn't need hardware decoding
gpu-api=opengl                         #system based rendering API
opengl-swapinterval=1                  #enables VSYNC
autosync=30                            #gradually adjusts a/v sync based on audio delay measurements, n=0 can drop frames, n=1 subtle, n>1 smooths playback to adjust for audio lag
video-sync=display-resample            #slightly alter audio speed to account for A/V desync
priority=high                          #windows OS process priority
video-sync-max-video-change=3          #maximum speed difference in percent that is applied to video
hr-seek=yes                            #use time-based precise seeks whenever possible (i.e. supported formats)
chapter-seek-threshold=3               #within 3 seconds of a chapter, assume seeking is from chapter point (chapter B+2s --> seek chapter backwards --> chapter A)
cache=1800000
cache-backbuffer=200000
#######################################


###########   Tweaks   ###########
##################################
keep-open=yes                     #pause player if seek past end of file, or next playlist entry is empty
image-display-duration=inf        #use mpv as a clean image format viewer
video-latency-hacks=yes           #if demuxer reports incorrect FPS this should be disabled
##################################


####   Track-Language Preferences   ####
########################################
track-auto-selection=yes
slang=en,eng                            #subtitle language auto-select
alang=ja,jp,jpn,en,eng                  #audio language auto-select
########################################


##############   Subs   ##############
######################################
sub-ass-vsfilter-blur-compat=yes      #Scale blur tags by video resolution instead of script resolution
sub-fix-timing=yes                    #hopefully your subtitle provider has already fixed this issue
sub-pos=90                            #raises unstyled subs by 10% of the scaled output's height
sub-font='GandhiSansBold'
sub-blur=0
sub-color=1
sub-border-color=0
sub-border-size=2.4
sub-spacing=0
sub-shadow-color=0
sub-shadow-offset=0.8
sub-font-size=48
sub-gray
sub-bold
sub-filter-sdh=yes
sub-margin-x=128
sub-margin-y=48
sub-ass-override=no                   #toggle-able with z-o
######################################


############   Volume   ############
####################################
volume=100
volume-max=120
audio-pitch-correction=yes          #when changing playback speed, audio will not change perceived pitch (no mouse squeaking sounds for fast playback)
####################################


#################   Screenshotting   #################
######################################################
screenshot-format=png
screenshot-high-bit-depth=no                          #apparently this is broken, and taking pre-filter screenshots with video higher than 8-bit is also not accurate :/
screenshot-png-compression=9
screenshot-directory="C:/Users/davst/Pictures/mpv"    #set this to your own path
screenshot-template='%f_[%P]_(%{sub-text})_%#00n'     # { filename.ext_[00_11_22.345]_(subtitles_on_screen)_1.png }
                                                      # not surprisingly, non-tagged ASS lines on display will all be put in the subtitles name, probably making the filename too long or have invalid characters in it
#screenshot-template='%f_[%P]_%#00n'                  #switch this with the active line if there is trouble with sub-text
######################################################


########   Debanding   ########
###############################
deband=yes
deband-iterations=4            #number of times to run deband algorithm
deband-threshold=64            #higher number better strength but more quality loss
deband-range=8                 #scales with every iteration higher gives better detection while lower is more aggressive
deband-grain=32                #add dynamic grain to frames where debanding takes places
###############################


####### Profiles and Scaling #######
####################################
[autoloop]
profile-desc=cond:p.duration<5
loop-file=inf


####################################################
[staticGrain]
glsl-shader="~~/shaders/noise_static_luma.hook"     #run static shaders before scaling
glsl-shader="~~/shaders/noise_static_chroma.hook"   #run static shaders before scaling
deband-grain=0                                      #switch dynamic grain to static
####################################################


####################################################
[Deringing]
scale-antiring=0.7
dscale-antiring=0.6
cscale-antiring=0.6                                 #deringing (Higher = Less ringing, but more detail loss, default is 0.5)
####################################################


####################################################
[Scaling]
scale=ewa_lanczos                                   #this section is highly based on personal preference
dscale=haasnsoft                                    #these settings are normally by-passed by the GLSL shaders enabled later
#dscale=mitchell
sws-scaler=lanczos
correct-downscaling=yes                             #improves downscaling allegedly
#cscale=haasnsoft
cscale=mitchell
glsl-shader="~~/shaders/KrigBilateral.glsl"         #appends krigbilateral chroma scaler, which scores highest in PSNR tests compared to mpv's default cscale options, this works with cscale
####################################################


####################################################
[Interpolation]
blend-subtitles=yes                                 #blends subs onto upscaled video before interpolation
interpolation=yes
tscale=box                                          # NOTE: this needs to be thoroughly tested, at higher refresh rates the results for panning interpolation are still poor compared to more advanced predictive filters like Sony's MotionFlow and SVP's proprietary algorithm
tscale-window=sphinx                                #(allegedly) smoothest and sharpest t-scaler
tscale-radius=1.0                                   #values >1 increase motion blur, values <1 increase contrast/sharpness
tscale-clamp=0.0
####################################################


##############   Custom GLSL Presets   #############
####################################################

####################################################
[ssr]
#use only when an upscale would result in a 2pass (the window size is 2^n x the size of the video)
profile=Deringing
glsl-shaders-clr
profile=Scaling
glsl-shader="~~/shaders/SSimSuperRes.glsl"
profile=Interpolation
term-playing-msg="Profile applied: SSimSuperRes.glsl active"
####################################################

####################################################
[fsrcnnx]
profile=Deringing
glsl-shaders-clr
profile=Scaling
glsl-shader="~~/shaders/FSRCNNX_x2_16-0-4-1.glsl"
profile=Interpolation
term-playing-msg="Profile applied: FSRCNNX_x2_16-0-4-1.glsl active"
####################################################
